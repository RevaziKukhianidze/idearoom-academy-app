{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/idearoom-academy-app-main/idearoom-academy-app-main/app/services/apiDoubleCourse.jsx"],"sourcesContent":["// services/apiDoubleCourse.js\nimport supabase from \"./supabase\";\n\n// Simple in-memory cache\nconst cache = {\n  data: {},\n  timeouts: {},\n\n  DEFAULT_TTL: 3600000,\n\n  set(key, value, ttl = this.DEFAULT_TTL) {\n    this.data[key] = value;\n\n    // Clear any existing timeout\n    if (this.timeouts[key]) {\n      clearTimeout(this.timeouts[key]);\n    }\n\n    // Set expiration timeout\n    this.timeouts[key] = setTimeout(() => {\n      delete this.data[key];\n      delete this.timeouts[key];\n    }, ttl);\n\n    return value;\n  },\n\n  get(key) {\n    return this.data[key];\n  },\n\n  has(key) {\n    return key in this.data;\n  },\n\n  invalidate(key) {\n    delete this.data[key];\n    if (this.timeouts[key]) {\n      clearTimeout(this.timeouts[key]);\n      delete this.timeouts[key];\n    }\n  },\n\n  invalidateAll() {\n    Object.keys(this.timeouts).forEach((key) => {\n      clearTimeout(this.timeouts[key]);\n    });\n    this.data = {};\n    this.timeouts = {};\n  },\n};\n\nexport async function apiDoubleCourse() {\n  const cacheKey = \"all_offered_courses\";\n\n  try {\n    // Check cache first\n    if (cache.has(cacheKey)) {\n      return cache.get(cacheKey);\n    }\n\n    // If not in cache, fetch from Supabase\n    const { data, error } = await supabase.from(\"offered_course\").select(\"*\");\n\n    if (error) {\n      console.error(\"Supabase error:\", error);\n      throw error;\n    }\n\n    // Store in cache and return\n    return cache.set(cacheKey, data);\n  } catch (error) {\n    console.error(\"Error fetching courses:\", error);\n    throw error;\n  }\n}\n\nexport async function getOfferedCourseById(id) {\n  const cacheKey = `offered_course_${id}`;\n\n  try {\n    // Check cache first\n    if (cache.has(cacheKey)) {\n      return cache.get(cacheKey);\n    }\n\n    // If not in cache, fetch from Supabase\n    const { data, error } = await supabase\n      .from(\"offered_course\")\n      .select(\"*\")\n      .eq(\"id\", id)\n      .single();\n\n    if (error) {\n      console.error(\"Supabase error:\", error);\n      throw error;\n    }\n\n    // Store in cache and return\n    return cache.set(cacheKey, data);\n  } catch (error) {\n    console.error(\"Error fetching course:\", error);\n    throw error;\n  }\n}\n\n// Function to manually invalidate cache when data changes\nexport function invalidateOfferedCourseCache(id = null) {\n  if (id) {\n    // Invalidate specific offered course\n    cache.invalidate(`offered_course_${id}`);\n  }\n\n  // Always invalidate the collection cache\n  cache.invalidate(\"all_offered_courses\");\n}\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAC9B;;AAEA,yBAAyB;AACzB,MAAM,QAAQ;IACZ,MAAM,CAAC;IACP,UAAU,CAAC;IAEX,aAAa;IAEb,KAAI,GAAG,EAAE,KAAK,EAAE,MAAM,IAAI,CAAC,WAAW;QACpC,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;QAEjB,6BAA6B;QAC7B,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;YACtB,aAAa,IAAI,CAAC,QAAQ,CAAC,IAAI;QACjC;QAEA,yBAAyB;QACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,WAAW;YAC9B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI;YACrB,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI;QAC3B,GAAG;QAEH,OAAO;IACT;IAEA,KAAI,GAAG;QACL,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI;IACvB;IAEA,KAAI,GAAG;QACL,OAAO,OAAO,IAAI,CAAC,IAAI;IACzB;IAEA,YAAW,GAAG;QACZ,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI;QACrB,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;YACtB,aAAa,IAAI,CAAC,QAAQ,CAAC,IAAI;YAC/B,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI;QAC3B;IACF;IAEA;QACE,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;YAClC,aAAa,IAAI,CAAC,QAAQ,CAAC,IAAI;QACjC;QACA,IAAI,CAAC,IAAI,GAAG,CAAC;QACb,IAAI,CAAC,QAAQ,GAAG,CAAC;IACnB;AACF;AAEO,eAAe;IACpB,MAAM,WAAW;IAEjB,IAAI;QACF,oBAAoB;QACpB,IAAI,MAAM,GAAG,CAAC,WAAW;YACvB,OAAO,MAAM,GAAG,CAAC;QACnB;QAEA,uCAAuC;QACvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,kBAAkB,MAAM,CAAC;QAErE,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,mBAAmB;YACjC,MAAM;QACR;QAEA,4BAA4B;QAC5B,OAAO,MAAM,GAAG,CAAC,UAAU;IAC7B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AAEO,eAAe,qBAAqB,EAAE;IAC3C,MAAM,WAAW,CAAC,eAAe,EAAE,IAAI;IAEvC,IAAI;QACF,oBAAoB;QACpB,IAAI,MAAM,GAAG,CAAC,WAAW;YACvB,OAAO,MAAM,GAAG,CAAC;QACnB;QAEA,uCAAuC;QACvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAA,CAAA,UAAQ,CACnC,IAAI,CAAC,kBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,IACT,MAAM;QAET,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,mBAAmB;YACjC,MAAM;QACR;QAEA,4BAA4B;QAC5B,OAAO,MAAM,GAAG,CAAC,UAAU;IAC7B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM;IACR;AACF;AAGO,SAAS,6BAA6B,KAAK,IAAI;IACpD,IAAI,IAAI;QACN,qCAAqC;QACrC,MAAM,UAAU,CAAC,CAAC,eAAe,EAAE,IAAI;IACzC;IAEA,yCAAyC;IACzC,MAAM,UAAU,CAAC;AACnB","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/idearoom-academy-app-main/idearoom-academy-app-main/public/homeIcon.svg.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 16, height: 14, blurDataURL: null, blurWidth: 0, blurHeight: 0 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,2GAAA,CAAA,UAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,aAAa;IAAM,WAAW;IAAG,YAAY;AAAE","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/idearoom-academy-app-main/idearoom-academy-app-main/public/rightArrow.svg.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 5, height: 9, blurDataURL: null, blurWidth: 0, blurHeight: 0 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,6GAAA,CAAA,UAAG;IAAE,OAAO;IAAG,QAAQ;IAAG,aAAa;IAAM,WAAW;IAAG,YAAY;AAAE","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/idearoom-academy-app-main/idearoom-academy-app-main/app/_components/HeadTopOffer.jsx"],"sourcesContent":["import React from \"react\";\r\nimport HomeIcon from \"../../public/homeIcon.svg\";\r\nimport rightArrow from \"../../public/rightArrow.svg\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function HeadTopOffer({ children, isCoursesPage = true }) {\r\n  return (\r\n    <div className=\"flex flex-wrap gap-3 items-center sm:my-7\">\r\n      <Link href=\"/\">\r\n        <Image\r\n          className=\"w-[14px] h-[12px] sm:w-[16px] sm:h-[14px]\"\r\n          src={HomeIcon}\r\n          alt=\"homeIcon-svg\"\r\n        />\r\n      </Link>\r\n      <Image className=\"mt-[2px]\" src={rightArrow} alt=\"rightArrow-svg\" />\r\n\r\n      {isCoursesPage ? (\r\n        <p className=\"caps-text text-xs sm:text-sm font-regular text-[#6A737D] mt-[5px]\">\r\n          შეთავაზება\r\n        </p>\r\n      ) : (\r\n        <>\r\n          <Link href=\"/offer\">\r\n            <p className=\"caps-text text-xs hover:underline sm:text-sm font-regular text-[#6A737D] mt-[5px]\">\r\n              შეთავაზება\r\n            </p>\r\n          </Link>\r\n\r\n          {children && (\r\n            <>\r\n              <Image\r\n                className=\"mt-[2px]\"\r\n                src={rightArrow}\r\n                alt=\"rightArrow-svg\"\r\n              />\r\n              <div className=\"caps-text text-xs sm:text-sm font-regular text-[#6A737D] mt-[5px]\">\r\n                {children}\r\n              </div>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,SAAS,aAAa,EAAE,QAAQ,EAAE,gBAAgB,IAAI,EAAE;IACrE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,+JAAA,CAAA,UAAI;gBAAC,MAAK;0BACT,cAAA,6LAAC,gIAAA,CAAA,UAAK;oBACJ,WAAU;oBACV,KAAK,uQAAA,CAAA,UAAQ;oBACb,KAAI;;;;;;;;;;;0BAGR,6LAAC,gIAAA,CAAA,UAAK;gBAAC,WAAU;gBAAW,KAAK,2QAAA,CAAA,UAAU;gBAAE,KAAI;;;;;;YAEhD,8BACC,6LAAC;gBAAE,WAAU;0BAAoE;;;;;qCAIjF;;kCACE,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;kCACT,cAAA,6LAAC;4BAAE,WAAU;sCAAoF;;;;;;;;;;;oBAKlG,0BACC;;0CACE,6LAAC,gIAAA,CAAA,UAAK;gCACJ,WAAU;gCACV,KAAK,2QAAA,CAAA,UAAU;gCACf,KAAI;;;;;;0CAEN,6LAAC;gCAAI,WAAU;0CACZ;;;;;;;;;;;;;;;;AAQjB;KAxCwB","debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/idearoom-academy-app-main/idearoom-academy-app-main/app/offer/page.jsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport Link from \"next/link\";\nimport { apiDoubleCourse } from \"../services/apiDoubleCourse\";\nimport HeadTopOffer from \"../_components/HeadTopOffer\";\n\nexport default function Page() {\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const fetchCourses = useCallback(async () => {\n    try {\n      const data = await apiDoubleCourse();\n\n      // ასლის შექმნა და დალაგება (არ შეცვალოთ ორიგინალი მასივი)\n      const sortedCourses = [...data].sort((a, b) => b.id - a.id);\n      setCourses(sortedCourses);\n    } catch (err) {\n      console.error(\"Error fetching courses:\", err);\n      // Store a more user-friendly error message\n      setError(\n        err.message || \"Failed to load courses. Please try again later.\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    document.title = \"idearoom | შეთავაზება\";\n\n    // გამოვიყენოთ AbortController მოთხოვნის გასაუქმებლად საჭიროების შემთხვევაში\n    const abortController = new AbortController();\n\n    fetchCourses();\n\n    return () => {\n      abortController.abort();\n    };\n  }, [fetchCourses]);\n\n  if (loading) {\n    return (\n      <div>\n        <section className=\"relative z-50 bg-white w-full h-screen\">\n          <div className=\"absolute spinner top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50\"></div>\n        </section>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto max-sm:max-w-[90%] mt-[120px] py-8 text-center\">\n        <div className=\"bg-red-50 p-6 rounded-lg shadow\">\n          <h2 className=\"text-lg font-bold text-red-700 mb-2\">\n            Error loading courses\n          </h2>\n          <p className=\"text-red-600\">{error}</p>\n          <button\n            onClick={() => {\n              setLoading(true);\n              setError(null);\n              fetchCourses();\n            }}\n            className=\"mt-4 bg-primary-500 text-white py-2 px-6 rounded-lg hover:bg-primary-600 transition\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto max-sm:max-w-[90%] mt-[80px] py-8\">\n      <div className=\"mt-2\">\n        <HeadTopOffer>\n          <p className=\"cursor-pointer\">შეთავაზება</p>\n        </HeadTopOffer>\n      </div>\n      <div className=\"grid grid-cols-1 mt-5 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {courses.map((course) => (\n          <div\n            key={course.id}\n            className=\"bg-white blog-shadow relative rounded-[20px] p-6\"\n          >\n            <div className=\"relative\">\n              <img\n                className=\"mb-5 w-full relative\"\n                src={course.image}\n                alt={`course-image-${course.id}`}\n                loading=\"lazy\" // დავამატოთ lazy loading ზედმეტი რექვესტების თავიდან ასაცილებლად\n              />\n              <p className=\"absolute max-sm:py-[5px] max-sm:px-4 max-sm:text-sm bg-[#FDB927] top-[10px] right-[10px] px-5 py-[5px] shadow-lg pt-[10px] rounded-full text-[#383838] font-bold caps-text\">\n                -{course.discount_percentage}%\n              </p>\n            </div>\n            <div className=\"flex flex-wrap items-center gap-2 mb-6\">\n              {course.course_category.map((category, id) => {\n                return (\n                  <div key={id}>\n                    <p className=\"text-sm max-lg:text-xs caps-text font-[500] text-[#383838] bg-[#f4f6f7] py-[6px] px-4 rounded-full\">\n                      {category}\n                    </p>\n                  </div>\n                );\n              })}\n            </div>\n            <h2 className=\"text-lg mt-6 text-secondary-800 font-[600] mb-2 caps-text\">\n              {course.title}\n            </h2>\n            <p className=\"text-[#434a53] text-sm caps-text mb-6 line-clamp-2\">\n              {course.text}\n            </p>\n            <div className=\"w-full h-[1px] bg-[#EFF2F5] mb-6\"></div>\n            <div className=\"flex items-center justify-between \">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-[#383838] text-xl lg:mr-2 font-bold\">\n                  ₾ {course.price}\n                </span>\n                <span className=\"text-[#d95a5a] font-[500] text-xl line-through\">\n                  ₾ {course.old_price}\n                </span>\n              </div>\n              <Link href={`/offer/${course.id}`} prefetch={false}>\n                <button className=\"w-full rounded-[10px] bg-primary-500 text-[#fff] hover:bg-primary-600 duration-300  py-[12px] pt-[14px] text-sm caps-text font-bold px-5\">\n                  დეტალურად\n                </button>\n              </Link>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}